!function(){angular.module("UPayApp",["firebase","ui.bootstrap","ui.router"])}(),function(){function e(e,n,o){var t=[],a=e/o.length;return $.each(o,function(e,o){var r=!0;n==o.name&&(r=!1);var s=(o.name,{id:e,name:o.name,sum:a,active:r});t.push(s)}),t}function n(e){var n=[];console.log("payments: "+this.payments),$.each(e,function(e,o){var t=o.shares,a=o.name;return n.push(a),$.each(t,function(e,o){o.name!=a&&(n[a]+=o.sum)}),console.log(n),n})}var o=angular.module("UPayApp");o.factory("paymentList",["$firebaseArray",function(e){var n=new Firebase("https://dazzling-torch-7927.firebaseio.com/rest/project1/payments");return e(n)}]),o.controller("PaymentController",["$scope","paymentList","$firebaseArray",function(o,t,a){var r=new Firebase("https://dazzling-torch-7927.firebaseio.com/rest/project1/payments");o.payments=t,this.active=!1,this.shares=[];o.updateSum=function(e){o.active=!0},o.initPayment=function(e,t){console.log(e),o.active=!0,o.payment.name=e,o.persons=t,n(o.payments)},o.changeActivity=function(e,n,o){console.log(n+"   "+e+"   "+o);var t=r.child(""+e).child("shares/"+n);console.log(t),t.update({active:o})},o.addPayment=function(){o.payments.$add({createdDate:Firebase.ServerValue.TIMESTAMP,sum:o.payment.sum,payer:o.payment.name,description:"Maksettu: "+new Date(Date.now()).toLocaleString(),shares:e(o.payment.sum,o.payment.name,o.persons)}).then(function(){alert("Payment saved!")})["catch"](function(e){alert("Error!")}),o.payment.name="",o.payment.sum=0,o.active=!1}}])}(),function(){var e=angular.module("UPayApp");e.factory("personList",["$firebaseArray",function(e){var n=new Firebase("https://dazzling-torch-7927.firebaseio.com/rest/project1/persons");return e(n)}]),e.controller("PersonListController",["$scope","personList",function(e,n){e.persons=n,e.addPerson=function(){e.persons.$add({name:e.person,sum:0}),e.person=""}}])}(),function(){function e(e){e.project={name:"Uusi"},e.addNewProject=function(){e.project={name:e.newProject},e.newProject="",console.log(this.project)}}angular.module("UPayApp").controller("ProjectController",["$scope",e])}(),function(){function e(e){e.todos=["Learn Angular","Learn Node.js","Drink beer"],e.addTodo=function(){e.todos.push(e.newTodo),e.newTodo=""}}angular.module("UPayApp").controller("TodoListController",["$scope",e])}();